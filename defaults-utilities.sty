%%
% Package which provides some minimal common elements for use by all defaults-*
% files.
%
% See defaults.tex for more info.
%
% AUTHORS:      Justin Willmert ‹justin@jdjlab.com›
% SOURCES:      http://jmert.jdjlab.com/cgit/latex.git
%
% CONTRIBUTORS:
%   1. Ian-Mathew Hornburg ‹imhornburg@gmail.com›
%      (none — by personal correspondence)
%
%%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{defaults-utilities}
    [2016/04/09 J. Willmert's preample elements]

%% Load low-level tools
\RequirePackage{etoolbox}
\RequirePackage{xpatch}


%% Detect draft mode
\RequirePackage{ifdraft}


%% Allow LuaTeX and XeTeX-specific options
\RequirePackage{ifxetex}
\RequirePackage{ifluatex}
% Also generate a boolean which is true for either XeTeX or LuaTeX since
% some features (i.e. fontspec) is allowable in both but not pdfTeX
\newif\ifxeluatex
\ifxetex
    \xeluatextrue
\else
    \ifluatex
        \xeluatextrue
    \else
        \xeluatexfalse
    \fi
\fi



%% Enable some XeTeX features that I.-M. suggested may be useful:
\ifxetex
	% Normalize input text to Unicode normalization form NFC, using precomposed
	% characters where possible instead of base characters with combining marks.
	% XeTeX defaults to no normalization.
	\XeTeXinputnormalization=1
\fi

\endinput
